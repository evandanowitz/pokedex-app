let pokemonRepository = (function () {
  let t = [],
    e = document.querySelector("#myModal");
  async function n() {
    try {
      let t = await fetch("https://pokeapi.co/api/v2/pokemon/?limit=150"),
        e = await t.json();
      e.results.forEach(function (t) {
        let e = { name: t.name, detailsUrl: t.url };
        a(e);
      });
    } catch (n) {
      console.error(n);
    }
  }
  function a(e) {
    t.push(e);
  }
  function i() {
    return t;
  }
  function o(t) {
    l(t).then(function () {
      let e = document.querySelector(".modal-body");
      e.innerHTML = "";
      let n = document.createElement("div");
      (n.innerHTML = `
                <h1>${t.name}</h1>
                <p>Height: ${t.height} decimetres</p>
                <p>Type(s): ${t.types.join(
                  ", "
                )}</p> <!-- Display types as a comma-separated list -->
                <img src='${t.imgUrl}' alt='${t.name}'>`),
        e.appendChild(n);
    });
  }
  async function l(t) {
    let e = t.detailsUrl;
    try {
      let n = await fetch(e),
        a = await n.json();
      (t.imgUrl = a.sprites.front_default),
        (t.height = a.height),
        (t.types = a.types.map((t) => t.type.name));
    } catch (i) {
      console.error(i);
    }
  }
  return {
    getAll: i,
    add: a,
    addListItem: function t(e) {
      let n = document.querySelector(".pokemon-list"),
        a = document.createElement("div");
      a.classList.add(
        "col-xl-2",
        "col-lg-3",
        "col-md-4",
        "col-sm-6",
        "col-12",
        "mb-4"
      );
      let i = document.createElement("li");
      i.classList.add("list-group-item", "mx-auto");
      let l = document.createElement("button");
      (l.innerText = e.name),
        l.classList.add("pokemon-buttons", "btn", "btn-primary", "btn-sm"),
        (l.style.width = "150px"),
        (l.style.height = "40px"),
        l.setAttribute("data-target", "#myModal"),
        l.setAttribute("data-toggle", "modal"),
        i.appendChild(l),
        a.appendChild(i),
        n.appendChild(a),
        l.addEventListener("click", function (t) {
          o(e);
        });
    },
    showDetails: o,
    loadList: n,
    loadDetails: l,
    showModal: function t(n, a, i) {
      e.innerHTML = "";
      document.createElement("div").classList.add("modal");
    },
  };
})();
pokemonRepository.loadList().then(function () {
  pokemonRepository.getAll().forEach(function (t) {
    pokemonRepository.addListItem(t);
  });
});
